{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/ozbe-io-rises/","result":{"data":{"site":{"siteMetadata":{"title":"ozbe","social":[{"name":"twitter","url":"https://twitter.com/ozbe"},{"name":"github","url":"https://github.com/ozbe"},{"name":"linkedin","url":"https://www.linkedin.com/in/josh-aaseby"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"1c1a8493-b7a7-5613-a879-9293074350ff","excerpt":"Migrating ozbe.io from vanilla HTML to GatsbyJS. Background Several years ago (over 7 years to be more precise) I set up  ozbe.github.io  as…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ozbe.io Rises\",\n  \"date\": \"2020-05-05T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Migrating ozbe.io from vanilla HTML to GatsbyJS.\"), mdx(\"h2\", {\n    \"id\": \"background\"\n  }, \"Background\"), mdx(\"p\", null, \"Several years ago (over 7 years to be more precise) I set up \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/ozbe.github.io\"\n  }), \"ozbe.github.io\"), \" as a personal landing page. The landing page contained my name, links to my various service accounts, and a spiffy skeuomorphic background. It was a completely static site, hosted on GitHub Pages. (GH Pages) \"), mdx(\"p\", null, \"I had aspirations to take that landing page and turn it into a blog that I could share what technologies I have been exploring. Aside from updating the site to support the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://ozbe.io\"\n  }), \"ozbe.io\"), \" domain, the site has remained dormant and has grown more stale. A few of the links no longer worked, Google+ no longer exists and I had become more strict about what I share on Facebook. Also, the skeuomorphic background was no longer in vogue, I blame iOS 7 (which launched in 2014) for that one.\"), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, \"Overview\"), mdx(\"p\", null, \"I won\\u2019t get into my motivations, but now I\\u2019m taking the time to turn that landing page into a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"proper\"), \" blog. To make that possible, I\\u2019m going to make a couple changes to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/ozbe.github.io\"\n  }), \"ozbe.github.io\"), \".\"), mdx(\"p\", null, \"First, instead of editing HTML by hand, I\\u2019m going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/\"\n  }), \"GatsbyJS\"), \" to generate my static content. It is free, open source, and seems to have a healthy community around it. Gatsby will allow me to take the blog posts I write in Markdown, turn them into HTML, and update the site to make that content accessible. Gatsby offers some other nice features, such as theming, that I hope I will take better advantage of in the future as well.\"), mdx(\"p\", null, \"Secondly, to reduce the friction of getting my changes published in a form ready for GHP Pages, I\\u2019m going to use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/features/actions\"\n  }), \"GitHub Actions \"), \". GitHub Actions will allow me to automate my publish workflow, for free. Specifically, a GitHub Action will run Gatsby\\u2019s build and save that content for GH Pages to present.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" Normally I\\u2019d prefer to write my requirements out and discuss alternatives when talking about my technologies choices. In this case, I\\u2019m going to exclude them for expediency and brevity. Just know that I looked at some alternatives to these technologies. \")), mdx(\"h2\", {\n    \"id\": \"gatsby\"\n  }, \"Gatsby\"), mdx(\"p\", null, \"Gatsby offers a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/docs/quick-start/\"\n  }), \"Quick Start | GatsbyJS\"), \" to help people who haven\\u2019t used Gatsby, like myself, get started. That seemed like a sensible place to get started, but after looking at the first few commands\\u2026\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ nvm install 10\\n$ nvm use 10\\n$ npm install -g gatsby-cli\\n\")), mdx(\"p\", null, \"I quickly nixed that idea. I\\u2019m sure that will work and those directions are right for 90+% (made up percentage) of users, but I don\\u2019t want to install anything on my machine to work with this blog. I try to minimize what I install on my computer as much as possible. Maybe it was because I\\u2019ve been burned too much by computers failing or system bloat or wanting to selectively migrate to a new computer.\"), mdx(\"p\", null, \"I created \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/gatsby-docker\"\n  }), \"ozbe/gatsby-docker\"), \", a Gatsby Docker image intended to be used for development, to avoid having to install anything on my machine. To use gatsby-cli in a interactive container that will be removed when the container stops, I run the following command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ docker run --rm -it ozbe/gatsby\\n\")), mdx(\"p\", null, \"Now I can run any gatsby-cli command , such as help:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"# in gastby container\\n$ gatsby --help\\n\")), mdx(\"p\", null, \"While being able to run gatsby-cli that quickly is nice, I am going to have to make a few changes to support development. First, I am going to have to mount a volume to work on my existing blog and persist changes made instance the container. Secondly, I am going to expose Gatsby\\u2019s develop and serve ports to my host machine to access the site from outside the container (say, from a web browser). Those requirements turn our nice simple docker run command from above into:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"docker run --rm -it \\\\\\n-v `pwd`:/site \\\\\\n-p 9000:9000 -p 8000:8000 \\\\\\nozbe/gatsby\\n\")), mdx(\"p\", null, \"Running my Gatsby container, I am going to set up what I need to go through the Gatsby \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/tutorial/using-a-theme/#create-a-new-site-using-the-blog-theme-starter\"\n  }), \"Using a Theme\"), \" tutorial, which will leave me with a starter blog.\"), mdx(\"p\", null, \"Before going through the tutorial, I need to setup a new Gatsby site with the gatsby-starter-blog-theme. \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ gatsby new my-blog https://github.com/gatsbyjs/gatsby-starter-blog-theme\\n# include hidden files in mv pattern below\\n$ shopt -s dotglob\\n# copy contents from my-blog to current directory\\n$ mv my-blog/* ./ \\n# remove the now empty my-blog folder\\n$ rm -r my-blog\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" If you know of a better better way to install a new Gatsby site in the current working directory or moving the contents, please \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/ozbe.github.io/compare/gatsby...master\"\n  }), \"make a merge request\"), \". \")), mdx(\"p\", null, \"Now I have the new site, let me check that the site and container are properly working by running the Gatsby development server and opening Chrome:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ gatsby develop -H 0.0.0.0\\n# on host machine, open dev in Chrome\\n$ open -a \\\"Google Chrome\\\" http://localhost:8000/\\n\")), mdx(\"p\", null, \"Works on my machine. Now I\\u2019ll go through \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/tutorial/using-a-theme/#create-a-new-site-using-the-blog-theme-starter\"\n  }), \"Using a Theme | GatsbyJS\"), \" and have myself a starter blog.\"), mdx(\"h2\", {\n    \"id\": \"github-actions\"\n  }, \"GitHub Actions\"), mdx(\"p\", null, \"Now that I have Gatsby working locally, I need to build the static assets and save those assets in the root path of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"master\"), \" branch of ozbe.github.io. I could do this manually on my local machine with something like:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"WARNING:\"), \" I did not actually test these commands and I\\u2019m confident they won\\u2019t work: \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"$ git checkout gatsby\\n$ gatsby build\\n$ git checkout master\\n$ mv -f /public/* ./\\n$ git commit -a --allow-empty-message -m ''\\n$ git push\\n\")), mdx(\"p\", null, \"To reduce the friction of having to manually running through these steps (not to mention reducing the errors), I\\u2019m going to use GitHub Actions to publish my blog (remember?). Thankfully, I won\\u2019t have to work hard to leverage GitHub Actions. \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/enriikke/gatsby-gh-pages-action/blob/master/README.md\"\n  }), \"enriikke/gatsby-gh-pages-action\"), \" does exactly what I need. \"), mdx(\"p\", null, \"Using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/enriikke/gatsby-gh-pages-action/blob/master/README.md\"\n  }), \"README\"), \", I\\u2019ll just copy the Usage snippet into the project at the path \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./.github/workflows/publish.yml\"), \" and change the push branches name from \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dev\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby\"), \" (the one I\\u2019m using for my Gatsby work and may as well continue using into the future). \"), mdx(\"p\", null, \"Now when I push changes to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby\"), \" branch of the ozbe.github.com repo, the publish workflow will trigger, create a build, and commit the assets to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"master\"), \" branch. That is when GH Pages takes over and serves the assets to those that visit ozbe.io (this is a gross oversimplification, but you get the idea).\"), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, \"Conclusion\"), mdx(\"p\", null, \"After several years, I finally have a blog where I can share my technical explorations. Gatsby does the heavily lifting of generating the static HTML content and GitHub Actions takes the tedium out of publishing my site.\"), mdx(\"p\", null, \"Thanks for following along. I hope this may prove useful to others, it was a little entertaining to read, and that you\\u2019ll come back to read more.\"), mdx(\"p\", null, \"If you have any suggestions or see anything that can be improved, please open an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/ozbe.github.io/issues/new\"\n  }), \"Issue\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ozbe/ozbe.github.io/compare/gatsby...master\"\n  }), \"merge request\"), \".\"), mdx(\"h2\", {\n    \"id\": \"next-steps\"\n  }, \"Next Steps\"), mdx(\"p\", null, \"Where do I go from here with the blog? I have a few ideas:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"I use \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://bear.app\"\n  }), \"Bear\"), \" to write my posts. Currently I manually move the post from Bear to Gatsby. Maybe I can come up with an automated workflow using my project \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ozbe/x-callback-url\"\n  }), \"GitHub - ozbe/x-callback-url: A utility for interacting with local macOS applications using x-callback-url http://x-callback-url.com.\"), \"?\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"It\\u2019d be nice to have some analytics on the blog to see which articles are popular. There are some privacy conscience analytic solutions I can add, like \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.goatcounter.com/\"\n  }), \"GoatCounter \\u2013 Website analytics for regular folks\"), \"?\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Analytics or not, I\\u2019m sure this site will be wildly popular. \", \"<\", \"/sarcasim\", \">\", \" I wonder if I can add comments with something like\", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://staticman.net/\"\n  }), \"Staticman: Static sites with superpowers\"), \" to enable more engagement from the readers.\")));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/ozbe-io-rises/","title":"ozbe.io Rises","tags":[],"date":"May 05, 2020","image":null,"imageAlt":null,"imageCaptionText":null,"imageCaptionLink":null,"socialImage":null},"previous":null,"next":{"__typename":"MdxBlogPost","id":"9bdeaed1-cb0c-5a22-a4c7-5a59e87a1920","excerpt":"tl;dr Gist with steps:   ozbe/ Access-Nighp-Baby-Tracker-Data-from-Latest-Backup-on-a-Mac.md Background My partner and I recently had our…","slug":"/access-nighp-baby-tracker-data-from-latest-backup-on-a-mac/","title":"Access Nighp Baby Tracker Data from Latest Backup on a Mac","date":"May 15, 2020"}},"pageContext":{"id":"1c1a8493-b7a7-5613-a879-9293074350ff","nextId":"9bdeaed1-cb0c-5a22-a4c7-5a59e87a1920","maxWidth":1380}},"staticQueryHashes":["2744905544","3090755652","386998304","764694655"]}